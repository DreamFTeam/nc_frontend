
<div role="main" class="container " *ngIf="ready">
    <div class="container-sm row mb-2 h-100">
      <div class="col-xs-2 col-sm-4 col-md-4 col-lg-3 p-2">
        <div>
          <img class="col p-3"[src]="profile.imageContent ? profile.imageContent : '../../assets/img/nopicture.jpg'" style="background-color:rgba(243, 202, 165, 0.863);">
          <a *ngIf="owner && profile.activated" (click)="edit()" class="btn btn-outline-secondary mt-2 w-100">Edit profile</a>
          <a *ngIf="!owner && profile.activated && this.role=='ROLE_USER'" class="btn btn-outline-secondary mt-2 w-100" (click)="sendFriendRequest(profile)"> Add friend </a>
        </div>
      </div>
      <div class="col p-3">
        <b>{{profile.username}}</b>
        <span *ngIf="profile.role!='ROLE_USER'" class="blue"> {{profile.role.substr(5).toLowerCase()}}</span>
        <h5 *ngIf="!profile.activated" style="color: red;"> deactivated </h5>
        <h3 *ngIf="profile.online; else lastseen" class="blue"> online </h3>
        <ng-template #lastseen> <h3 class="blue" *ngIf="profile.lastTimeOnline"> Last seen on {{profile.lastTimeOnline  |  date:'medium'}} </h3> </ng-template>
        <h3>{{profile.aboutMe}}</h3>
      </div>
      <div *ngIf= "this.role!='ROLE_USER' && owner && profile.activated" class="col-3 ">
        <a class="btn btn-outline-secondary mt-2" (click)="deactivate(false)"> Deactivate </a>
        <div class="w-100"></div>
        <a class="btn btn-outline-secondary mt-2" *ngIf="role=='ROLE_SUPERADMIN' && this.profile.role=='ROLE_ADMIN'" (click)="editAdmin(false)">Downgrade to Moderator </a>
        <a *ngIf="role=='ROLE_SUPERADMIN' && this.profile.role=='ROLE_MODERATOR'"  class="btn btn-outline-secondary mt-2"  (click)="editAdmin(true)" >Upgrade to Admin </a>
      </div>
    </div>

  <div class="container-sm row p-4" *ngIf="profile.role=='ROLE_USER'">

    <b><span style="font-size: larger;">{{profile?.username}}'s quizzes</span></b>
    <div *ngFor="let quiz of quizzes" >
      <div *ngIf="owner || quiz.published" class="row m-2 border p-2 " >
          <img class="col-xs-5 col-sm-5 col-md-4 col-lg-3 p-2" style="background-color:rgba(243, 202, 165, 0.863);" [src]="quiz.imageContent ? quiz.imageContent : '../../assets/img/quiz.jpg'" (click)="goToQuiz(quiz.id)" >
          <div class="col-xs-5 col-sm-7 col-md-8 col-lg-9 p-2 p-2">  
        <a (click)="goToQuiz(quiz.id)" class="blue" style="user-select: none; font-size: larger;">
         {{quiz.title}}
        </a> 
      <span>
          <h5 *ngIf="quiz.description" > <b>Description: {{quiz.description}}</b></h5>
          <h5> <b>Date:</b> {{quiz.creationDate}}</h5> 
          <h5 *ngIf="owner" > <b>Status:</b> {{quiz.published ? "published" : quiz.validated ? "not published" : "not validated"}}</h5> 
          <h5> <b>Rating:</b> {{quiz.rating}} </h5>
  </span> 
  <img class="col-xs-2 col-sm-3 col-md-2 col-lg-1 p-2 float-right" [src]='quiz.favourite ? "../../assets/img/liked.png" : "../../assets/img/notliked.png"' (click)="markQuizFavourite(quiz)">
</div>
</div>
    </div>
    <div class="w-100"></div>
    <div *ngIf="!quizzes?.length" class="blue"> No quizzes </div>
  </div>
  </div>

  